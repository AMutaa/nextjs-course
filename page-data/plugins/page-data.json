{"componentChunkName":"component---src-templates-lesson-template-js","path":"/plugins","result":{"data":{"markdownRemark":{"html":"<p>The <code class=\"language-text\">next.config.js</code> file gives us the ability to do some powerful stuff. Because the config file has a convention, you should be able to use changes written by others. These are Next.js plugins. </p>\n<p>They look like this:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// next.config.js</span>\n<span class=\"token keyword\">const</span> withOffline <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'next-offline'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> config <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// your next config</span>\n<span class=\"token punctuation\">}</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token function\">withOffline</span><span class=\"token punctuation\">(</span>config<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Most plugins follow the <code class=\"language-text\">withPluginName</code> format. They also usually take your custom Next.js config, if any, to ensure its returned and consumed by Next.js. This allows you to compose plugins:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// next.config.js</span>\n<span class=\"token keyword\">const</span> withPlugins <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'next-compose-plugins'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> withOffline <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'next-offline'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> withReactSvg <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'next-react-svg'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> config <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  env<span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token constant\">MY_ENV</span><span class=\"token operator\">:</span> process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">MY_ENV</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token function\">withPlugins</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n  withOffline<span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">[</span>withReactSvg<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// config for reactSvgPlugin</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">]</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span> config<span class=\"token punctuation\">)</span></code></pre></div>\n<p>We're going to install and env plugin that makes it super simple to use env vars in our app.</p>\n<p>First, let's install the modules we need.</p>\n<p><strong>npm</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">npm</span> i next-env dotenv-load --dev</code></pre></div>\n<p><strong>yarn</strong></p>\n<div class=\"gatsby-highlight\" data-language=\"shell\"><pre class=\"language-shell\"><code class=\"language-shell\"><span class=\"token function\">yarn</span> <span class=\"token function\">add</span> next-env dotenv-load</code></pre></div>\n<p>In your <code class=\"language-text\">next.config.js</code> file:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> nextEnv <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'next-env'</span><span class=\"token punctuation\">)</span>\n<span class=\"token keyword\">const</span> dotenvLoad <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'dotenv-load'</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token function\">dotenvLoad</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\n\n<span class=\"token keyword\">const</span> withNextEnv <span class=\"token operator\">=</span> <span class=\"token function\">nextEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span>\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> <span class=\"token function\">withNextEnv</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Next, create a <code class=\"language-text\">.env</code> file on the root and add some envs.</p>\n<div class=\"gatsby-highlight\" data-language=\"text\"><pre class=\"language-text\"><code class=\"language-text\">HELP_APP_URL=https://google.com</code></pre></div>\n<blockquote>\n<p>⚠️   <strong>warning</strong>: don't check .env files into git</p>\n</blockquote>\n<p>Now, we'll use the env in our app. Go to the Nav component and add an <code class=\"language-text\">a</code> tag to link to the external app.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// src/components/nav.jsx</span>\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>a</span> <span class=\"token attr-name\">sx</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span>\n    color<span class=\"token operator\">:</span> <span class=\"token string\">'text'</span><span class=\"token punctuation\">,</span>\n    fontSize<span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n    cursor<span class=\"token operator\">:</span> <span class=\"token string\">'pointer'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n  <span class=\"token attr-name\">href</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>process<span class=\"token punctuation\">.</span>env<span class=\"token punctuation\">.</span><span class=\"token constant\">HELP_APP_URL</span><span class=\"token punctuation\">}</span></span>\n<span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n  Help\n</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>a</span><span class=\"token punctuation\">></span></span></code></pre></div>","frontmatter":{"path":"/plugins","title":"Plugins","order":"5B","section":"Configuration","description":"Learn Next.js with Scott Moss and Frontend Masters"}},"allMarkdownRemark":{"edges":[{"node":{"frontmatter":{"order":"6B","path":"/api-handlers","title":"API Handlers"}}},{"node":{"frontmatter":{"order":"6A","path":"/api","title":"API Routes"}}},{"node":{"frontmatter":{"order":"5A","path":"/config","title":"Customizing Next.js config"}}},{"node":{"frontmatter":{"order":"9A","path":"/deployment","title":"Deployment"}}},{"node":{"frontmatter":{"order":"7A","path":"/fetching-data","title":"Fetching Data"}}},{"node":{"frontmatter":{"order":"10A","path":"/final","title":"Final Thoughts"}}},{"node":{"frontmatter":{"order":"2C","path":"/getting-starterd","title":"Getting Started"}}},{"node":{"frontmatter":{"order":"1A","path":"/intro","title":"Introduction"}}},{"node":{"frontmatter":{"order":"3B","path":"/navigation","title":"Navigation"}}},{"node":{"frontmatter":{"order":"1B","path":"/overview","title":"Course Overview"}}},{"node":{"frontmatter":{"order":"3A","path":"/pages","title":"Routing with Pages"}}},{"node":{"frontmatter":{"order":"5B","path":"/plugins","title":"Plugins"}}},{"node":{"frontmatter":{"order":"7B","path":"/rendering-modes","title":"Rendering Modes"}}},{"node":{"frontmatter":{"order":"1C","path":"/setup","title":"Setup"}}},{"node":{"frontmatter":{"order":"8A","path":"/working-with-ssr","title":"Working with SSR"}}},{"node":{"frontmatter":{"order":"4A","path":"/styling","title":"Styling"}}},{"node":{"frontmatter":{"order":"4B","path":"/themeui","title":"Theme UI"}}},{"node":{"frontmatter":{"order":"2B","path":"/what-is-nextjs","title":"What is Next.js"}}},{"node":{"frontmatter":{"order":"2A","path":"/what-youll-learn","title":"What you'll learn"}}}]}},"pageContext":{}},"staticQueryHashes":["2959687377"]}